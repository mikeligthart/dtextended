package Individual;

sub add_to_loop {
  my ($spc,$t,$s,$seen) = @_;
  my @n = (3, 1*7, 4, 4, (4+3), 8);
  @n = map $_ % $nn, @n;
  if (!$seen->{wze}++) {
  my $l = zeroes($t);

  if ('sequencer') {
    my $sound = q[resample(asynth(0.25, $n[$note % @n], $len, $spc,  mseries([2, 0.7381, 0.007149, 1*8, 0.6521, 3, 5*8*4*5, 5, 7, 3], 1, 7, 0.1947),  mseries([10, 0.3285, 0.4924, 0, 0.6771, 3, 2*8, 3, -(2/1), 1], 3, 4, 0.4542),  mseries([1, 0.457, 0.3958, 0, 0.1159, 7, 8, 5, 8, 1], 4, 10, 0.004459), [1, 0.1343, 0.3685, 0, 0.9758, 5, 5, 4, 6, 1/3], [1, 0.3503, 0.6367, 7*1, 0.6713, 5, 3, 3, -(4/4)*(3/4), 1/4], [7, 0.08182, 0.902, (6+2)*6, 0.567, 1*(4+6)*1*1, 8, 4, 1, 1], [5, 0.3368, 0.3406, 4*1, 0.7381, 8, 1, 1, -(4/2)*(3/4)*(4/4)*(4/4), 1]),$n[$note % @n])];
    my ($note, $param, $len) = (2,3,nlen(4*(4/3)*(3/1)));
    my ($vol, $pan, $groove, $phase) = (0.13+0.08+0.06+0.08+0.12,0.6,7,5);
    my ($lowrad, $lowcyc, $hirad, $hicyc) = (8,4*((5*(7+(2+1))+7)+5)*2,5,6);
    $l->dice(X,[1,1,2],X,X) .= pdl([getsound(eval '"'.$sound.'"'),$vol,$pan,$groove,$phase]);
  }

  addlayer($s, $l, $spc);
  }
}
